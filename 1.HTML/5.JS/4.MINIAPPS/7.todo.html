<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TodoList</title>
    <style>
        #todoList>li {
            cursor: pointer;
        }


        .completed {
            text-decoration: line-through;
        }
    </style>
</head>

<body>
    <h1>TodoList</h1>
    <input type="text" id="inputText" placeholder="글자를 입력하시오...">
    <button id="addBtn">입력</button>
    <ul id="todoList"></ul>

    <script>
    const input = document.getElementById('inputText');
    const addBtn = document.getElementById('addBtn');
    const todoList = document.getElementById('todoList');


    addBtn.addEventListener('click', () => {

        const newli = createListItem(input.value);
        console.log(newli);
        todoList.appendChild(newli);

    });

    function createListItem(text) {

        const li = document.createElement('li');
        li.textContent = text;
        text = '';

        li.innerHTML = `
            ${li.textContent}
            <button class="modifyBtn">수정</button>
            <button class="deleteBtn">삭제</button>
        `;

        const delBtn = li.querySelector('.deleteBtn');
        const modBtn = li.querySelector('.modifyBtn');

        modBtn.addEventListener('click', (event) => {
            event.stopPropagation();
            let currentText = li.firstChild.textContent.trim();
            li.textContent = '';

            const newInput = document.createElement('input');
            newInput.type = 'text';
            newInput.value = currentText;

            const saveBtn = document.createElement('button');
            saveBtn.innerText = '저장';

            li.appendChild(newInput);
            li.appendChild(saveBtn);

            saveBtn.addEventListener('click', () => {
                const new_li = createListItem(newInput.value);
                li.replaceWith(new_li);
            });

        });

        delBtn.addEventListener('click', () => {
            li.remove();
        });

        li.addEventListener('click', () => {
            li.classList.toggle('completed');
        });

        return li;

    }

</script>
</body>


</html>